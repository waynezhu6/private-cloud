(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,function(e,t,n){e.exports={body:"Header_body__yo6pM",item:"Header_item__QU8RG",logout:"Header_logout__dWkWT",spacer:"Header_spacer__V5slt"}},function(e,t,n){e.exports={body:"Image_body__17Mrw",image:"Image_image__2nvp0",container:"Image_container__1bAub",trash:"Image_trash__2tb7M",name:"Image_name__3-zHc"}},function(e,t,n){e.exports={body:"Login_body__3-4pi",wrapper:"Login_wrapper__3FaL_",form:"Login_form__3X3R4",buttons:"Login_buttons__3NCtD"}},,,,,function(e,t,n){e.exports={body:"Sidebar_body__qqNVV"}},function(e,t,n){e.exports={body:"Images_body__wIp9U"}},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(10),o=n.n(s),i=(n(19),n(11)),u=n(2),p=n.n(u),b=n(4),j=n(3),l="http://localhost:5000/api/",f=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l+"auth/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l+"auth/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l+"images",{method:"GET",headers:{"x-token":t,"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={login:f,signup:d,getImage:function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l+"images/"+n,{method:"GET",headers:{"x-token":t,"Content-Type":"image/*"}});case 2:return r=e.sent,e.next=5,r.blob();case 5:return a=e.sent,e.abrupt("return",URL.createObjectURL(a));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),uploadImage:function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l+"images",{method:"POST",body:t,headers:{"x-token":n}}).then((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getFileNames:m,useToken:function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2);return[t[0],t[1]]}},O=(n(21),n(5)),x=n.n(O),g=function(e){var t=Object(a.useState)(e.token),n=Object(j.a)(t,2),c=n[0],s=n[1],o=Object(a.useRef)(),i=Object(a.useRef)(null),u=function(){var t=Object(b.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData(i.current),console.log(c),t.next=4,h.uploadImage(r,c);case 4:e.onFileSubmit();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){s(e.token)}),[e.token]),Object(r.jsxs)("div",{className:x.a.body,children:[Object(r.jsx)("div",{className:x.a.item,children:"Shopify Backend Challenge"}),Object(r.jsx)("div",{className:x.a.spacer}),Object(r.jsxs)("div",{className:x.a.item,children:[Object(r.jsx)("form",{action:"",ref:i,children:Object(r.jsx)("input",{onChange:u,name:"image",type:"file",hidden:!0,multiple:!0,ref:o,accept:"image/*"})}),Object(r.jsx)("button",{onClick:function(){return o.current.click()},children:"Upload"})]}),Object(r.jsx)("div",{className:x.a.item,children:Object(r.jsx)("button",{className:x.a.logout,children:"Logout"})})]})},v=n(12),_=n.n(v),y=function(){return Object(r.jsx)("div",{className:_.a.body})},w=n(6),k=n.n(w),N=function(e){return Object(r.jsxs)("div",{className:k.a.body,children:[Object(r.jsx)("img",{src:e.src,className:k.a.image}),Object(r.jsxs)("div",{className:k.a.container,children:[Object(r.jsx)("div",{className:k.a.name,children:e.name}),Object(r.jsx)("div",{className:k.a.trash,children:"\ud83d\uddd1"})]})]})},S=n(13),I=n.n(S),C=function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){s(e.images)}),[e.images]),Object(r.jsx)("div",{className:I.a.body,children:c.map((function(e,t){return Object(r.jsx)(N,{name:e.name,src:e.img},t)}))})},T=n(7),L=n.n(T),U=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(""),i=Object(j.a)(o,2),u=i[0],p=i[1];return Object(r.jsx)("div",{className:L.a.body,children:Object(r.jsxs)("div",{className:L.a.wrapper,children:[Object(r.jsxs)("form",{className:L.a.form,children:[Object(r.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){return s(e.target.value)},required:!0}),Object(r.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){return p(e.target.value)},required:!0})]}),Object(r.jsxs)("div",{className:L.a.buttons,children:[Object(r.jsx)("button",{onClick:function(){return e.signup(c,u)},children:"Sign Up"}),Object(r.jsx)("div",{}),Object(r.jsx)("button",{onClick:function(){return e.login(c,u)},children:"Log In"})]})]})})},E=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),o=Object(j.a)(s,2),u=o[0],l=o[1],f=Object(a.useState)(Date.now()),d=Object(j.a)(f,2),m=d[0],O=d[1],x=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,h.login(t,n);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,h.signup(t,n);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(p.a.mark((function e(){var t,r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getFileNames(n);case 2:if((t=e.sent).images){e.next=5;break}return e.abrupt("return");case 5:r=[],a=Object(i.a)(t.images),e.prev=7,a.s();case 9:if((c=a.n()).done){e.next=20;break}return s=c.value,e.t0=r,e.next=14,h.getImage(n,s);case 14:e.t1=e.sent,e.t2=s,e.t3={img:e.t1,name:e.t2},e.t0.push.call(e.t0,e.t3);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t4=e.catch(7),a.e(e.t4);case 25:return e.prev=25,a.f(),e.finish(25);case 28:console.log(r),l(r);case 30:case"end":return e.stop()}}),e,null,[[7,22,25,28]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n&&_()}),[m,n]),Object(r.jsxs)("div",{className:"body",children:[n?"":Object(r.jsx)(U,{login:x,signup:v}),Object(r.jsx)(g,{token:n,onFileSubmit:function(){O(Date.now())}}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(y,{}),Object(r.jsx)(C,{images:u})]})]})};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(E,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.ea624034.chunk.js.map