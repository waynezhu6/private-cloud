{"version":3,"sources":["styles/Header.module.scss","styles/Image.module.scss","styles/Login.module.scss","styles/Sidebar.module.scss","styles/Images.module.scss","lib/api.js","components/Header.jsx","components/Sidebar.jsx","components/Image.jsx","components/Images.jsx","components/Login.jsx","App.js","index.js"],"names":["module","exports","SERVER_URL","login","username","password","a","fetch","method","headers","body","JSON","stringify","then","res","json","token","signup","getFileNames","API","getImage","filename","blob","URL","createObjectURL","uploadImage","console","log","useToken","useState","Header","props","setToken","input","useRef","form","onFileSubmit","e","FormData","current","useEffect","className","styles","item","spacer","action","ref","onChange","name","type","hidden","multiple","accept","onClick","click","logout","Sidebar","Image","src","image","container","trash","Images","images","setImages","map","data","index","img","Login","setUsername","setPassword","wrapper","placeholder","target","value","required","buttons","App","Date","now","lastSubmit","setLastSubmit","getImages","filenames","blobs","push","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.262fba1e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Header_body__yo6pM\",\"item\":\"Header_item__QU8RG\",\"logout\":\"Header_logout__dWkWT\",\"spacer\":\"Header_spacer__V5slt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Image_body__17Mrw\",\"image\":\"Image_image__2nvp0\",\"container\":\"Image_container__1bAub\",\"trash\":\"Image_trash__2tb7M\",\"name\":\"Image_name__3-zHc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Login_body__3-4pi\",\"wrapper\":\"Login_wrapper__3FaL_\",\"form\":\"Login_form__3X3R4\",\"buttons\":\"Login_buttons__3NCtD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Sidebar_body__qqNVV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Images_body__wIp9U\"};","import { useState } from \"react\";\r\n\r\n//const SERVER_URL = \"http://localhost:5000/api/\";\r\nconst SERVER_URL = \"http://34.123.191.140:5000/\";\r\n\r\nconst useToken = () => {\r\n  const [token, setToken] = useState(null);\r\n  return [token, setToken];\r\n}\r\n\r\nconst login = async(username, password) => {\r\n  //returns access token if successful\r\n  let res = await fetch(SERVER_URL + \"auth/login\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      'Content-Type':'application/json',\r\n      'Accept':'application/json'\r\n    },\r\n    body: JSON.stringify({ username, password })\r\n  })\r\n  .then(res => res.json())\r\n\r\n  return res.token;\r\n}\r\n\r\nconst signup = async(username, password) => {\r\n  //returns true if signup successful\r\n  let res = await fetch(SERVER_URL + \"auth/signup\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      'Content-Type':'application/json',\r\n      'Accept':'application/json'\r\n    },\r\n    body: JSON.stringify({ username, password })\r\n  })\r\n  .then(res => res.json())\r\n  return res.token;\r\n}\r\n\r\nconst getFileNames = async(token) => {\r\n  //gets all image filenames of this user\r\n  let res = await fetch(SERVER_URL + \"images\", {\r\n    method: \"GET\",\r\n    headers: {\r\n      'x-token': token,\r\n      'Content-Type':'application/json',\r\n      'Accept':'application/json'\r\n    }\r\n  })\r\n  .then(res => res.json());\r\n  return res;\r\n}\r\n\r\nconst getImage = async(token, filename) => {\r\n  //gets images\r\n  let res = await fetch(SERVER_URL + \"images/\" + filename, {\r\n    method: \"GET\",\r\n    headers: {\r\n      'x-token': token,\r\n      'Content-Type': 'image/*'\r\n    }\r\n  })\r\n  const blob = await res.blob();\r\n  return URL.createObjectURL(blob);\r\n}\r\n\r\nconst uploadImage = async(body, token) => {\r\n  await fetch(SERVER_URL + \"images\", {\r\n    method: \"POST\",\r\n    body: body,\r\n    headers: {\r\n      'x-token': token,\r\n    }\r\n  })\r\n  .then(res => console.log(res));\r\n}\r\n\r\nconst API = { login, signup, getImage, uploadImage, getFileNames, useToken };\r\nexport default API;","import React, { useEffect, useRef, useState } from 'react';\r\nimport API from \"../lib/api\";\r\nimport styles from '../styles/Header.module.scss';\r\n\r\nconst Header = (props) => {\r\n\r\n  const [token, setToken] = useState(props.token);\r\n  const input = useRef();\r\n  const form = useRef(null);\r\n  \r\n  const onFileSubmit = async(e) => {\r\n    const body = new FormData(form.current);\r\n    console.log(token);\r\n    await API.uploadImage(body, token);\r\n    props.onFileSubmit();\r\n  }\r\n\r\n  useEffect(() => {\r\n    setToken(props.token);\r\n  }, [props.token])\r\n\r\n  return(\r\n    <div className={styles.body}>\r\n      <div className={styles.item}>Shopify Backend Challenge</div>\r\n      <div className={styles.spacer}></div>\r\n      <div className={styles.item}>\r\n        <form action=\"\" ref={form}>\r\n          <input \r\n            onChange={onFileSubmit} \r\n            name=\"image\" \r\n            type=\"file\" \r\n            hidden \r\n            multiple \r\n            ref={input}\r\n            accept=\"image/*\"\r\n          />\r\n        </form>\r\n        <button onClick={() => input.current.click()}>Upload</button>\r\n      </div>\r\n      <div className={styles.item}>\r\n        <button className={styles.logout}>Logout</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport styles from '../styles/Sidebar.module.scss';\r\n\r\nconst Sidebar = () => {\r\n  return(\r\n    <div className={styles.body}></div>\r\n  )\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from 'react';\r\nimport styles from '../styles/Image.module.scss';\r\n\r\nconst Image = (props) => {\r\n  \r\n  return(\r\n    <div className={styles.body}>\r\n      <img src={props.src} className={styles.image}></img>\r\n      <div className={styles.container}>\r\n        <div className={styles.name}>{props.name}</div>\r\n        <div className={styles.trash}>&#128465;</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Image;","import React, { useEffect, useState } from 'react';\r\nimport Image from '../components/Image';\r\nimport styles from '../styles/Images.module.scss';\r\n\r\nconst Images = (props) => {\r\n\r\n  const [images, setImages] = useState([]); //stores url to image blobs\r\n\r\n  useEffect(() => {\r\n    setImages(props.images);\r\n  }, [props.images]);\r\n\r\n  return(\r\n    <div className={styles.body}>\r\n      {images.map((data, index) => {\r\n        return <Image name={data.name} src={data.img} key={index}/>\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Images;","import React, { useState } from 'react';\r\nimport styles from '../styles/Login.module.scss';\r\n\r\nconst Login = (props) => {\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  return(\r\n    <div className={styles.body}>\r\n      <div className={styles.wrapper}>\r\n\r\n        <form className={styles.form}>\r\n          <input \r\n            type=\"text\" \r\n            placeholder='Username' \r\n            onChange={e => setUsername(e.target.value)}\r\n            required\r\n          />\r\n          <input \r\n            type=\"password\" \r\n            placeholder='Password'\r\n            onChange={e => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </form>\r\n\r\n        <div className={styles.buttons}>\r\n          <button onClick={() => props.signup(username, password)}>Sign Up</button>\r\n          <div/>\r\n          <button onClick={() => props.login(username, password)}>Log In</button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import React, { useEffect, useState } from \"react\";\nimport API from \"./lib/api\";\nimport './App.css';\n\nimport Header from './components/Header';\nimport Sidebar from './components/Sidebar';\nimport Images from './components/Images';\nimport Login from './components/Login';\n\nconst App = () => {\n\n  const [token, setToken] = useState(null); //store app token here\n  const [images, setImages] = useState([]); //store filenames of this user's images\n  const [lastSubmit, setLastSubmit] = useState(Date.now());\n\n  const onFileSubmit = () => {\n    setLastSubmit(Date.now());\n  }\n\n  const login = async(username, password) => {\n    setToken(await API.login(username, password));\n  }\n\n  const signup = async(username, password) => {\n    setToken(await API.signup(username, password));\n  }\n\n  const getImages = async() => {\n    let filenames = await API.getFileNames(token);\n    if(!filenames.images)\n      return\n\n    let blobs = [];\n    for(const name of filenames.images)\n      blobs.push({img: await API.getImage(token, name), name });\n\n    console.log(blobs);\n    setImages(blobs);\n  }\n\n  useEffect(() => {\n    if(token){\n      getImages();\n    }\n  }, [lastSubmit, token])\n  \n  return(\n    <div className=\"body\">\n\n      {!token ? <Login login={login} signup={signup}/> : \"\"}\n\n      <Header token={token} onFileSubmit={onFileSubmit}/>\n      <div className=\"content\">\n        <Sidebar/>\n        <Images images={images}/>\n      </div> \n\n    </div>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}